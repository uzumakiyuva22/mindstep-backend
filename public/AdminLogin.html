<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Admin Login — MindStep</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;800&display=swap" rel="stylesheet">
<style>
:root{--accent1:#ff2d55;--accent2:#0066ff;--neon:#00e5ff}
*{box-sizing:border-box}
body{margin:0;min-height:100vh;display:flex;align-items:center;justify-content:center;font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#041022,#020316)}
.card{width:420px;border-radius:14px;padding:26px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:0 20px 60px rgba(0,0,0,0.6);color:#eaf6ff}
.brand{display:flex;gap:12px;align-items:center;margin-bottom:12px}
.logo{width:46px;height:46px;border-radius:10px;background:linear-gradient(45deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
.title{font-size:18px;margin:0}
.small{font-size:13px;color:#cfefff}
.field{margin-bottom:12px}
.label{display:block;font-size:13px;margin-bottom:6px;color:#9fdfff}
input{width:100%;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:rgba(10,14,24,0.6);color:#eaf6ff;font-size:14px}
.btn{width:100%;padding:12px;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:white;font-weight:700;margin-top:8px}
.btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:#cfefff;margin-top:10px}
.note{margin-top:12px;color:#aeefff;font-size:13px}
.toast{position:fixed;left:50%;transform:translateX(-50%);bottom:28px;padding:10px 14px;border-radius:10px;background:#111;color:#fff;opacity:0;transition:.25s}
.themeSel{position:absolute;right:14px;top:14px;padding:6px;border-radius:6px;border:none}
</style>
</head>
<body>
  <select id="themeSel" class="themeSel" title="Theme">
    <option value="A">Theme A — Neon</option>
    <option value="B">Theme B — Clean</option>
    <option value="C">Theme C — Glass</option>
  </select>

  <div class="card">
    <div class="brand"><div class="logo">MS</div><div><h2 class="title">MindStep — Admin</h2><div class="small">Secure admin access • Premium panel</div></div></div>

    <div class="note">Default admin (auto-created): <strong>Admin_Yuva</strong> / <strong>yuvarajan22</strong></div>

    <div class="field">
      <label class="label">Admin username</label>
      <input id="adminUser" type="text" value="Admin_Yuva" autocomplete="username">
    </div>
    <div class="field">
      <label class="label">Admin password</label>
      <input id="adminPass" type="password" value="yuvarajan22" autocomplete="current-password">
    </div>

    <button id="loginBtn" class="btn">Sign in</button>
    <button id="backBtn" class="btn secondary">← Back to User Login</button>
    <div id="status" class="note">Checking admin...</div>
  </div>

  <div id="toast" class="toast"></div>

<script>
(function(){
  const toastEl = document.getElementById('toast');
  function toast(msg, error=false){
    toastEl.textContent = msg;
    toastEl.style.background = error ? 'linear-gradient(90deg,#b33,#6b0000)' : '#111';
    toastEl.style.opacity = '1';
    setTimeout(()=> toastEl.style.opacity = '0', 2600);
  }

  document.getElementById('themeSel').addEventListener('change', (e)=>{
    const v = e.target.value;
    if(v==='B') document.body.style.background = 'linear-gradient(180deg,#f7f7fb,#fff)';
    else if(v==='C') document.body.style.background = 'linear-gradient(180deg,#061022,#020316)';
    else document.body.style.background = 'linear-gradient(180deg,#041022,#020316)';
  });

  document.getElementById('status').textContent = 'Default admin ready';
  document.getElementById('backBtn').addEventListener('click', ()=> location.href = '/LoginPage.html');

  document.getElementById('loginBtn').addEventListener('click', async ()=>{
    const u = document.getElementById('adminUser').value.trim();
    const p = document.getElementById('adminPass').value.trim();
    if(!u||!p){ toast('Enter credentials', true); return; }
    try {
      const res = await fetch('/admin/login', {
        method: 'POST',
        headers: { 'Content-Type':'application/json' },
        body: JSON.stringify({ username: u, password: p })
      });
      const j = await res.json().catch(()=>({}));
      if(res.ok && j.token){
        localStorage.setItem('admin_token', j.token);
        toast('Login success');
        setTimeout(()=> location.href = '/AdminDashboard.html', 500);
      } else {
        toast(j.message || 'Invalid admin', true);
      }
    } catch(err){
      console.error(err);
      toast('Server error', true);
    }
  });
})();
</script>
</body>
</html>
